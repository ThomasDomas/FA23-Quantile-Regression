[
  {
    "objectID": "analysis.html#visualization",
    "href": "analysis.html#visualization",
    "title": "4  Analysis",
    "section": "4.1 Visualization",
    "text": "4.1 Visualization\n\ndf &lt;- read.csv(\"TrainData.csv\") |&gt;\n  na.omit() |&gt;\n  distinct()\n\n\n4.1.1 Visualizing the Data\nThere are many different kinds of predictor variables in this data set. For instance, there are continuous variables such as GrLivArea, counting variables such as YearBuilt, and categorical variables such as HouseStyle. In all of these cases, we can see that the data is not normally distributed, including the response variable, SalePrice. The relationships between the variables and their distributions are illustrated in a joint plot below.\n{r ‘Visualizing data’} suppressWarnings({\np1 &lt;- df |&gt; ggplot(aes(x = GrLivArea)) + geom_histogram(binwidth = 100) + theme_bw() + theme(axis.text.y = element_blank(), axis.text.x = element_text(angle = 90), axis.ticks.y = element_blank()) + ylab(NULL) + xlab(“House Area (sq. ft.)”) + scale_x_continuous(position = “top”)\np2 &lt;- df |&gt; ggplot(aes(x = YearBuilt)) + geom_histogram(binwidth = 5) + theme_bw() + theme(axis.text.y = element_blank(), axis.text.x = element_text(angle = 90), axis.ticks.y = element_blank()) + ylab(NULL) + xlab(“Year Built”) + scale_x_continuous(position = “top”)\np3 &lt;- df |&gt; ggplot(aes(x = HouseStyle)) + geom_histogram(stat=“count”) + theme_bw() + theme(axis.text.y = element_blank(), axis.text.x = element_text(angle = 90), axis.ticks.y = element_blank()) + ylab(NULL) + xlab(“House Style”) + scale_x_discrete(position = “top”)\np4 &lt;- ggplot() + theme_minimal()\np5 &lt;- df |&gt; ggplot(aes(x = GrLivArea, y = SalePrice)) + geom_point() + theme_bw() + theme(axis.text = element_blank(), axis.ticks = element_blank()) + ylab(NULL) + xlab(NULL) p6 &lt;- df |&gt; ggplot(aes(x = YearBuilt, y = SalePrice)) + geom_point() + theme_bw() + theme(axis.text = element_blank(), axis.ticks = element_blank()) + ylab(NULL) + xlab(NULL) p7 &lt;- df |&gt; ggplot(aes(x = HouseStyle, y = SalePrice)) + geom_point() + theme_bw() + theme(axis.text = element_blank(), axis.ticks = element_blank()) + ylab(NULL) + xlab(NULL)\np8 &lt;- df |&gt; ggplot(aes(x = SalePrice)) + geom_histogram(binwidth = 10000) + theme_bw() + ylab(NULL) + xlab(“Sale Price ($)”) + coord_flip() + scale_x_continuous(position = “top”) + theme(axis.text.x = element_blank(), axis.ticks.x = element_blank())\ngrid.arrange(p1, p2, p3, p4, p5, p6, p7, p8, nrow = 2)\n})\nThus, the data fails to meet the assumptions of OLS, requiring the usage of a more flexible model like QR.\n\n\n4.1.2 Visualizing quantile regression vs OLS\nQR and OLS…\n\ndf |&gt; ggplot(aes(y = SalePrice, x = LotArea)) +\n  geom_point(size = 0.9) +\n  geom_smooth(method = lm, se = F, color = \"black\") +\n  geom_text(aes(y = 400000, x = 150000, label = \"OLS\"), color=\"black\") + \n  geom_quantile(quantiles=0.5, color=\"red\") + \n  geom_text(aes(y = 470000, x = 90000, label = \"50th quantile\"), color=\"red\") + \n  ylab(\"Sale price ($)\") +\n  xlab(\"Lot area (Square feet)\") +\n  theme_bw()\n\n\n\n\nQR and OLS…\n\n# df |&gt; ggplot(aes(y = SalePrice, x = GrLivArea)) +\n#   geom_boxplot()\n\ndf |&gt; ggplot(aes(y = SalePrice, x = GrLivArea)) +\n  geom_point(size = 0.9) +\n  stat_smooth(method = lm, color = \"black\") +\n  geom_text(aes(x = 4150, y = 500000, label = \"OLS\"), color=\"black\") + \n  geom_quantile(quantiles=0.25, color=\"red\") + \n  geom_text(aes(x = 4000, y = 270000, label = \"25th quantile\"), color=\"red\") + \n  geom_quantile(quantiles=0.5, color=\"blue\") + \n  geom_text(aes(x = 4150, y = 400000, label = \"50th\"), color=\"blue\") + \n  geom_quantile(quantiles=0.75, color=\"green\") + \n  geom_text(aes(x = 4000, y = 600000, label = \"75th quantile\"), color=\"green\") + \n  xlab(\"Sale price ($)\") +\n  ylab(\"Above ground area (Square feet)\") +\n  theme_bw()\n\n\n\n\nQR and OLS…"
  },
  {
    "objectID": "analysis.html#model-creation",
    "href": "analysis.html#model-creation",
    "title": "4  Analysis",
    "section": "4.2 Model creation",
    "text": "4.2 Model creation\n\n4.2.1 QR model\n\nqr50 = rq(data=df, SalePrice ~ GrLivArea + LotArea + TotRmsAbvGrd + as.factor(LotShape) + as.factor(Foundation), tau=0.5)\nqr50_summary = summary(qr50)\nqr50_summary\n\n\nCall: rq(formula = SalePrice ~ GrLivArea + LotArea + TotRmsAbvGrd + \n    as.factor(LotShape) + as.factor(Foundation), tau = 0.5, data = df)\n\ntau: [1] 0.5\n\nCoefficients:\n                            Value        Std. Error   t value      Pr(&gt;|t|)    \n(Intercept)                  36326.81296   3853.84854      9.42611      0.00000\nGrLivArea                       96.66934      4.02708     24.00481      0.00000\nLotArea                          0.99940      0.32815      3.04561      0.00236\nTotRmsAbvGrd                 -6476.18114   1080.95132     -5.99119      0.00000\nas.factor(LotShape)IR2       -5084.13375   7841.20685     -0.64839      0.51684\nas.factor(LotShape)IR3      -21074.80675   7616.42154     -2.76702      0.00573\nas.factor(LotShape)Reg      -11065.07360   2020.92512     -5.47525      0.00000\nas.factor(Foundation)CBlock  21252.40678   1709.40460     12.43264      0.00000\nas.factor(Foundation)PConc   53311.16094   2618.05941     20.36285      0.00000\nas.factor(Foundation)Slab   -16867.20619   5378.30454     -3.13616      0.00175\nas.factor(Foundation)Stone   14561.54748  13561.64146      1.07373      0.28312\nas.factor(Foundation)Wood    -2008.81877   9022.14216     -0.22265      0.82384\n\n\n\nnum_of_rows &lt;- nrow(qrs$coefficients)\nprint(qrs$coefficients)\n\n                                tau= 0.00     tau= 0.01     tau= 0.02\n(Intercept)                  1.907260e+04  1.743020e+04  1.571438e+04\nGrLivArea                    3.158046e+01  3.815811e+01  4.733864e+01\nLotArea                     -5.152624e-01  2.646414e-01  8.366654e-01\nTotRmsAbvGrd                -2.000399e+02 -9.248627e+02 -3.958059e+03\nas.factor(LotShape)IR2       5.748977e+04  4.827655e+04  2.560602e+04\nas.factor(LotShape)IR3      -4.279705e+04 -1.155755e+05 -1.754878e+05\nas.factor(LotShape)Reg      -1.508410e+04 -1.248607e+04 -4.847069e+03\nas.factor(Foundation)CBlock  1.303348e+04  1.336866e+04  1.862991e+04\nas.factor(Foundation)PConc   4.086654e+04  3.704847e+04  4.673344e+04\nas.factor(Foundation)Slab    2.081138e+04  1.337927e+04  1.545998e+04\nas.factor(Foundation)Stone   3.420382e+04  2.047170e+04  2.236209e+04\nas.factor(Foundation)Wood    8.918794e+04  7.448736e+04  7.079116e+04\n                                tau= 0.03     tau= 0.04     tau= 0.05\n(Intercept)                  1.785549e+04  1.619273e+04  2.629142e+04\nGrLivArea                    5.862641e+01  5.756826e+01  5.680326e+01\nLotArea                      6.715192e-01  6.270605e-01  5.943606e-01\nTotRmsAbvGrd                -3.354633e+03 -2.741825e+03 -3.028629e+03\nas.factor(LotShape)IR2       2.138604e+04  2.281863e+04  2.281830e+04\nas.factor(LotShape)IR3      -2.348490e+05 -2.359288e+05 -2.345772e+05\nas.factor(LotShape)Reg      -1.446826e+04 -1.474242e+04 -1.598177e+04\nas.factor(Foundation)CBlock  1.929781e+04  2.588135e+04  2.454094e+04\nas.factor(Foundation)PConc   4.357759e+04  4.777686e+04  4.617340e+04\nas.factor(Foundation)Slab    7.314657e+03  6.366382e+03  5.331688e+02\nas.factor(Foundation)Stone  -2.480137e+03 -4.480752e+03 -8.154851e+03\nas.factor(Foundation)Wood    5.259001e+04  5.325746e+04  4.609628e+04\n                                tau= 0.06     tau= 0.07     tau= 0.08\n(Intercept)                  2.903877e+04  4.134338e+04  4.251445e+04\nGrLivArea                    5.554777e+01  5.426205e+01  5.787837e+01\nLotArea                      5.863719e-01  5.455029e-01  5.284743e-01\nTotRmsAbvGrd                -2.936478e+03 -2.744000e+03 -3.488630e+03\nas.factor(LotShape)IR2       2.064264e+04  1.339719e+04  6.683520e+03\nas.factor(LotShape)IR3      -2.320881e+05 -2.339896e+05 -2.501122e+05\nas.factor(LotShape)Reg      -1.534056e+04 -2.154047e+04 -2.230509e+04\nas.factor(Foundation)CBlock  2.470625e+04  2.008009e+04  2.046662e+04\nas.factor(Foundation)PConc   4.742501e+04  4.457714e+04  4.914889e+04\nas.factor(Foundation)Slab    2.347074e+03 -4.732444e+02  2.143279e+03\nas.factor(Foundation)Stone  -9.526331e+03 -1.442881e+04 -1.510986e+04\nas.factor(Foundation)Wood    4.471091e+04  3.377193e+04  3.163894e+04\n                                tau= 0.09     tau= 0.10     tau= 0.11\n(Intercept)                  4.368167e+04  4.491814e+04  4.841278e+04\nGrLivArea                    6.049216e+01  5.978170e+01  6.657331e+01\nLotArea                      5.026959e-01  5.073371e-01  5.086785e-01\nTotRmsAbvGrd                -3.705161e+03 -3.760054e+03 -5.614344e+03\nas.factor(LotShape)IR2       4.057316e+03  4.840551e+03  2.889229e+03\nas.factor(LotShape)IR3      -2.607688e+05 -5.205533e+03 -6.478826e+03\nas.factor(LotShape)Reg      -2.304923e+04 -2.080819e+04 -2.018298e+04\nas.factor(Foundation)CBlock  2.039155e+04  2.004399e+04  2.062972e+04\nas.factor(Foundation)PConc   4.813660e+04  5.016736e+04  4.999322e+04\nas.factor(Foundation)Slab    1.463685e+03 -2.648337e+02 -2.479998e+03\nas.factor(Foundation)Stone  -1.918087e+04 -2.039997e+04 -2.024120e+04\nas.factor(Foundation)Wood    2.835826e+04  2.829839e+04  2.480609e+04\n                                tau= 0.12     tau= 0.13     tau= 0.14\n(Intercept)                  5.001533e+04  5.005460e+04  51565.413233\nGrLivArea                    6.665746e+01  6.850550e+01     68.965049\nLotArea                      6.204334e-01  6.469148e-01      0.647054\nTotRmsAbvGrd                -5.709534e+03 -6.032550e+03  -5835.685663\nas.factor(LotShape)IR2      -1.973617e+03 -1.203647e+03  -2853.317361\nas.factor(LotShape)IR3      -8.349604e+03 -1.005124e+04 -11813.191707\nas.factor(LotShape)Reg      -2.178290e+04 -2.177441e+04 -21366.141052\nas.factor(Foundation)CBlock  2.100319e+04  2.064166e+04  18395.046306\nas.factor(Foundation)PConc   5.129201e+04  5.251063e+04  50610.533089\nas.factor(Foundation)Slab   -2.879125e+03 -3.030500e+03  -5497.497448\nas.factor(Foundation)Stone  -2.013392e+04 -2.118682e+04 -26362.383000\nas.factor(Foundation)Wood    2.198746e+04  2.067246e+04  17549.450453\n                                tau= 0.15     tau= 0.16     tau= 0.17\n(Intercept)                  4.975067e+04  4.741715e+04  4.664381e+04\nGrLivArea                    6.960835e+01  7.052870e+01  7.196379e+01\nLotArea                      6.559945e-01  6.493904e-01  6.208841e-01\nTotRmsAbvGrd                -5.739557e+03 -5.416851e+03 -5.641007e+03\nas.factor(LotShape)IR2      -4.862124e+03 -5.935901e+03 -3.130515e+03\nas.factor(LotShape)IR3      -1.366012e+04 -1.407878e+04 -1.472829e+04\nas.factor(LotShape)Reg      -2.055763e+04 -1.928439e+04 -1.841096e+04\nas.factor(Foundation)CBlock  1.874494e+04  1.897010e+04  1.996281e+04\nas.factor(Foundation)PConc   5.230112e+04  5.141576e+04  5.270751e+04\nas.factor(Foundation)Slab   -4.943077e+03 -4.802600e+03 -4.351846e+03\nas.factor(Foundation)Stone  -2.799846e+04 -3.262745e+04  1.511390e+04\nas.factor(Foundation)Wood    1.788119e+04  1.744087e+04  1.778276e+04\n                                tau= 0.18     tau= 0.19     tau= 0.20\n(Intercept)                  4.684457e+04  47379.671631  4.914712e+04\nGrLivArea                    7.224243e+01     75.008035  7.583552e+01\nLotArea                      6.201548e-01      0.607323  6.058134e-01\nTotRmsAbvGrd                -5.499994e+03  -6078.379088 -6.203288e+03\nas.factor(LotShape)IR2      -4.155168e+03  -5708.116146 -5.255001e+03\nas.factor(LotShape)IR3      -1.617060e+04 -17573.368083 -1.770169e+04\nas.factor(LotShape)Reg      -1.814147e+04 -18247.850179 -1.770949e+04\nas.factor(Foundation)CBlock  1.931818e+04  20495.509967  1.847792e+04\nas.factor(Foundation)PConc   5.251327e+04  53113.945185  5.144642e+04\nas.factor(Foundation)Slab   -5.632858e+03  -5764.361963 -8.089181e+03\nas.factor(Foundation)Stone   1.284399e+04  12405.952655  9.642738e+03\nas.factor(Foundation)Wood    1.650773e+04  15278.916210  1.303029e+04\n                                tau= 0.21     tau= 0.22     tau= 0.23\n(Intercept)                  4.896436e+04  4.830968e+04  4.424439e+04\nGrLivArea                    7.764737e+01  7.792050e+01  7.940703e+01\nLotArea                      6.354506e-01  7.173964e-01  7.948646e-01\nTotRmsAbvGrd                -6.442979e+03 -6.429942e+03 -6.363837e+03\nas.factor(LotShape)IR2      -5.539746e+03  8.740977e+02 -3.297770e+02\nas.factor(LotShape)IR3      -1.941945e+04 -2.093304e+04 -2.339783e+04\nas.factor(LotShape)Reg      -1.791386e+04 -1.760198e+04 -1.643875e+04\nas.factor(Foundation)CBlock  1.842204e+04  1.863067e+04  2.008543e+04\nas.factor(Foundation)PConc   5.104465e+04  5.082257e+04  5.245880e+04\nas.factor(Foundation)Slab   -7.976011e+03 -8.160244e+03 -6.274239e+03\nas.factor(Foundation)Stone   8.422897e+03  7.372616e+03  6.105487e+03\nas.factor(Foundation)Wood    1.152544e+04  1.058625e+04  1.120291e+04\n                                tau= 0.24     tau= 0.25     tau= 0.26\n(Intercept)                  4.074317e+04  4.116558e+04  41814.364930\nGrLivArea                    8.149569e+01  8.167625e+01     80.853564\nLotArea                      8.455416e-01  8.467115e-01      1.012444\nTotRmsAbvGrd                -6.155488e+03 -6.198501e+03  -6202.430448\nas.factor(LotShape)IR2      -2.618957e+03 -3.045311e+03  -3906.570768\nas.factor(LotShape)IR3      -2.705648e+04 -2.751162e+04 -29564.087452\nas.factor(LotShape)Reg      -1.667865e+04 -1.595488e+04 -15123.209127\nas.factor(Foundation)CBlock  2.144637e+04  2.132848e+04  20714.420925\nas.factor(Foundation)PConc   5.320992e+04  5.318621e+04  52494.997869\nas.factor(Foundation)Slab   -4.698303e+03 -5.887421e+03  -7053.603095\nas.factor(Foundation)Stone   3.481241e+03  2.363358e+03    989.288366\nas.factor(Foundation)Wood    1.010232e+04  9.632535e+03   7784.592444\n                                tau= 0.27     tau= 0.28    tau= 0.29\n(Intercept)                  4.173205e+04  43380.669095  44780.77847\nGrLivArea                    8.237717e+01     82.537263     85.20424\nLotArea                      9.588918e-01      1.061351      1.05862\nTotRmsAbvGrd                -6.315299e+03  -6453.755136  -6820.42379\nas.factor(LotShape)IR2      -3.690110e+03  -4872.176447  -5679.46263\nas.factor(LotShape)IR3      -2.998393e+04 -32318.206039 -34410.75495\nas.factor(LotShape)Reg      -1.462296e+04 -14767.203187 -15268.05348\nas.factor(Foundation)CBlock  2.035374e+04  19071.130584  17854.92104\nas.factor(Foundation)PConc   5.216125e+04  51274.897411  49692.01666\nas.factor(Foundation)Slab   -7.486922e+03  -9706.991906 -12758.25614\nas.factor(Foundation)Stone  -8.607612e+02  -2364.387275  -5080.58937\nas.factor(Foundation)Wood    7.111991e+03   4491.379428   1330.74629\n                                tau= 0.30    tau= 0.31     tau= 0.32\n(Intercept)                  43104.152041  43934.44892  42896.864862\nGrLivArea                       86.989131     86.96682     86.915205\nLotArea                          1.056746      1.05561      1.055653\nTotRmsAbvGrd                 -6971.117013  -6923.71860  -6707.568657\nas.factor(LotShape)IR2       -5886.442233  -6480.53277  -5587.430697\nas.factor(LotShape)IR3      -35251.715729 -35827.64220 -36444.657181\nas.factor(LotShape)Reg      -14850.393612 -15033.98438 -14402.907404\nas.factor(Foundation)CBlock  18347.281985  18003.71488  18024.921015\nas.factor(Foundation)PConc   50155.976757  49635.23593  49862.173061\nas.factor(Foundation)Slab   -11272.182643 -12075.82258 -12485.632636\nas.factor(Foundation)Stone   -5889.524880  -6909.40945  -8349.136342\nas.factor(Foundation)Wood     1356.262742    335.40201    361.924660\n                                tau= 0.33     tau= 0.34     tau= 0.35\n(Intercept)                  42511.824648  4.243907e+04  4.177067e+04\nGrLivArea                       88.296363  8.926434e+01  8.987567e+01\nLotArea                          1.019486  9.690449e-01  9.314279e-01\nTotRmsAbvGrd                 -6763.455612 -6.830595e+03 -6.672427e+03\nas.factor(LotShape)IR2       -6186.203451 -6.690932e+03 -4.170777e+03\nas.factor(LotShape)IR3      -30551.099030 -2.190735e+04 -1.561921e+04\nas.factor(LotShape)Reg      -14183.576290 -1.434866e+04 -1.399323e+04\nas.factor(Foundation)CBlock  17936.283807  1.878876e+04  1.875589e+04\nas.factor(Foundation)PConc   49504.179620  4.955412e+04  4.920569e+04\nas.factor(Foundation)Slab   -13031.065286 -1.292365e+04 -1.343652e+04\nas.factor(Foundation)Stone  -10012.675090  8.904030e+03  7.717411e+03\nas.factor(Foundation)Wood     -344.235912  8.056164e+03  6.844624e+03\n                                tau= 0.36     tau= 0.37     tau= 0.38\n(Intercept)                  4.024509e+04  4.158442e+04  4.174320e+04\nGrLivArea                    9.014762e+01  9.131261e+01  9.251682e+01\nLotArea                      9.534417e-01  9.213131e-01  9.622424e-01\nTotRmsAbvGrd                -6.604843e+03 -6.872609e+03 -7.047250e+03\nas.factor(LotShape)IR2      -4.731935e+03 -4.648198e+03 -4.728617e+03\nas.factor(LotShape)IR3      -2.092673e+04 -1.567712e+04 -2.504253e+04\nas.factor(LotShape)Reg      -1.338351e+04 -1.375253e+04 -1.327926e+04\nas.factor(Foundation)CBlock  1.975627e+04  1.985308e+04  1.919523e+04\nas.factor(Foundation)PConc   4.995005e+04  4.985108e+04  4.905804e+04\nas.factor(Foundation)Slab   -1.327239e+04 -1.394347e+04 -1.493463e+04\nas.factor(Foundation)Stone   7.648037e+03  7.459647e+03  6.274940e+03\nas.factor(Foundation)Wood    7.085959e+03  6.237552e+03  4.869485e+03\n                                tau= 0.39     tau= 0.40     tau= 0.41\n(Intercept)                  4.182498e+04  4.273406e+04  4.176270e+04\nGrLivArea                    9.355638e+01  9.538028e+01  9.544243e+01\nLotArea                      9.408106e-01  9.378402e-01  9.380627e-01\nTotRmsAbvGrd                -7.242083e+03 -7.552507e+03 -7.423499e+03\nas.factor(LotShape)IR2      -4.601711e+03 -5.353828e+03 -5.915513e+03\nas.factor(LotShape)IR3      -2.120676e+04 -2.233948e+04 -1.689466e+04\nas.factor(LotShape)Reg      -1.304596e+04 -1.318003e+04 -1.242858e+04\nas.factor(Foundation)CBlock  1.933288e+04  1.896580e+04  1.949230e+04\nas.factor(Foundation)PConc   4.920433e+04  4.905007e+04  4.974167e+04\nas.factor(Foundation)Slab   -1.508991e+04 -1.620454e+04 -1.731164e+04\nas.factor(Foundation)Stone   6.285811e+03  5.561084e+03  4.802792e+03\nas.factor(Foundation)Wood    4.785116e+03  3.199987e+03  3.027711e+03\n                               tau= 0.42     tau= 0.43     tau= 0.44\n(Intercept)                  41240.26394  3.977463e+04  4.026078e+04\nGrLivArea                       95.62787  9.570634e+01  9.664536e+01\nLotArea                          0.95241  9.484862e-01  9.365731e-01\nTotRmsAbvGrd                 -7362.12167 -7.163398e+03 -7.326011e+03\nas.factor(LotShape)IR2       -6103.27198 -6.235339e+03 -6.463614e+03\nas.factor(LotShape)IR3      -16834.47881 -1.673720e+04 -1.771041e+04\nas.factor(LotShape)Reg      -12107.30684 -1.174091e+04 -1.182984e+04\nas.factor(Foundation)CBlock  19579.32077  2.049209e+04  2.070630e+04\nas.factor(Foundation)PConc   50079.72639  5.065936e+04  5.044656e+04\nas.factor(Foundation)Slab   -14746.41162 -1.469629e+04 -1.523660e+04\nas.factor(Foundation)Stone    4230.86818  3.880788e+03  3.619482e+03\nas.factor(Foundation)Wood     2560.13882  2.346110e+03  1.660258e+03\n                                tau= 0.45     tau= 0.46     tau= 0.47\n(Intercept)                  3.982009e+04  3.995566e+04  3.925449e+04\nGrLivArea                    9.732794e+01  9.718080e+01  9.679827e+01\nLotArea                      9.312661e-01  9.357454e-01  9.441504e-01\nTotRmsAbvGrd                -7.264291e+03 -7.183364e+03 -7.058772e+03\nas.factor(LotShape)IR2      -6.781769e+03 -7.563499e+03 -8.081887e+03\nas.factor(LotShape)IR3      -1.858460e+04 -1.909141e+04 -1.905721e+04\nas.factor(LotShape)Reg      -1.197615e+04 -1.212711e+04 -1.165720e+04\nas.factor(Foundation)CBlock  2.052260e+04  2.051672e+04  2.084325e+04\nas.factor(Foundation)PConc   5.029305e+04  5.130911e+04  5.232685e+04\nas.factor(Foundation)Slab   -1.568120e+04 -1.594239e+04 -1.597418e+04\nas.factor(Foundation)Stone   3.016581e+03  2.599795e+03  2.336312e+03\nas.factor(Foundation)Wood    4.756907e+02 -1.038483e+02  1.687994e+02\n                                tau= 0.48     tau= 0.49     tau= 0.50\n(Intercept)                  3.861433e+04  37399.763424  3.632681e+04\nGrLivArea                    9.698344e+01     97.133090  9.666934e+01\nLotArea                      9.483758e-01      1.013587  9.994041e-01\nTotRmsAbvGrd                -6.947667e+03  -6884.826800 -6.476181e+03\nas.factor(LotShape)IR2      -9.018745e+03  -4535.140860 -5.084134e+03\nas.factor(LotShape)IR3      -1.975016e+04 -20223.894604 -2.107481e+04\nas.factor(LotShape)Reg      -1.152812e+04 -11077.630985 -1.106507e+04\nas.factor(Foundation)CBlock  2.104044e+04  21248.240222  2.125241e+04\nas.factor(Foundation)PConc   5.288460e+04  53266.899987  5.331116e+04\nas.factor(Foundation)Slab   -1.626197e+04 -16523.838173 -1.686721e+04\nas.factor(Foundation)Stone   1.814719e+03   1394.506316  1.456155e+04\nas.factor(Foundation)Wood   -4.555689e+02   -797.185831 -2.008819e+03\n                                tau= 0.51     tau= 0.52     tau= 0.53\n(Intercept)                  36209.499069  36851.989684  36103.114058\nGrLivArea                       97.200682     97.964038     96.665111\nLotArea                          1.013992      1.028019      1.059833\nTotRmsAbvGrd                 -6546.349372  -6770.365107  -6142.838892\nas.factor(LotShape)IR2       -6183.249906  -7025.216818 -10624.581868\nas.factor(LotShape)IR3      -18680.208948 -19341.049329 -22976.614583\nas.factor(LotShape)Reg      -11222.102970 -10937.183360 -11914.049240\nas.factor(Foundation)CBlock  21698.742872  21797.352932  21288.921160\nas.factor(Foundation)PConc   53598.747688  53533.884695  54939.348353\nas.factor(Foundation)Slab   -13273.236748 -13601.997302 -15259.017706\nas.factor(Foundation)Stone   13666.789152  12637.046169  11422.658079\nas.factor(Foundation)Wood    -2438.077964  -2796.048534  -5177.690842\n                                tau= 0.54     tau= 0.55     tau= 0.56\n(Intercept)                  36629.822189  34995.593043  33083.904680\nGrLivArea                       97.010523     97.114560     97.661748\nLotArea                          1.197417      1.276541      1.408803\nTotRmsAbvGrd                 -6536.939050  -6267.003155  -6069.320673\nas.factor(LotShape)IR2       -5881.208840  -7755.527247  -9053.576989\nas.factor(LotShape)IR3      -24187.108275 -26557.753478 -27982.360436\nas.factor(LotShape)Reg      -11688.717947 -11902.162494 -11779.188272\nas.factor(Foundation)CBlock  22582.163283  22495.994709  21934.185495\nas.factor(Foundation)PConc   56090.655026  56964.665885  56843.875698\nas.factor(Foundation)Slab   -15689.308840 -15123.354452 -16492.209446\nas.factor(Foundation)Stone   11527.136673   9801.458141   7139.652386\nas.factor(Foundation)Wood    -4826.197906  -6493.831457  -8727.135501\n                                tau= 0.57     tau= 0.58     tau= 0.59\n(Intercept)                  32871.737126  32411.443027  31968.222571\nGrLivArea                       97.227751     98.011690     99.438794\nLotArea                          1.407146      1.392779      1.355357\nTotRmsAbvGrd                 -5925.763177  -5882.969940  -5628.935300\nas.factor(LotShape)IR2       -8062.329012  -9152.870868  -7885.372201\nas.factor(LotShape)IR3      -28196.572107 -28824.756742 -30993.700975\nas.factor(LotShape)Reg      -11508.084584 -11458.567736 -12043.148924\nas.factor(Foundation)CBlock  22094.934607  21759.509357  20683.584818\nas.factor(Foundation)PConc   57071.345956  57237.676799  55938.826758\nas.factor(Foundation)Slab   -16864.971274 -17529.090999 -18186.032481\nas.factor(Foundation)Stone    7368.497694   5584.945808    666.171731\nas.factor(Foundation)Wood    -8882.960618  -9964.139619 -13599.403814\n                                tau= 0.60     tau= 0.61     tau= 0.62\n(Intercept)                  30118.060829  29011.685785  27524.928140\nGrLivArea                       99.856585     99.830811    100.734025\nLotArea                          1.467412      1.452684      1.439921\nTotRmsAbvGrd                 -5509.121242  -5056.114631  -4928.700631\nas.factor(LotShape)IR2       -7803.801562  -8658.194409 -10142.641494\nas.factor(LotShape)IR3      -31864.843939 -19658.409600 -19304.586377\nas.factor(LotShape)Reg      -11348.616227 -12228.916451 -12120.088548\nas.factor(Foundation)CBlock  20511.880699  20434.879079  20803.081341\nas.factor(Foundation)PConc   56047.379857  56342.507925  56974.446590\nas.factor(Foundation)Slab   -19416.628453 -20805.083437 -20973.274334\nas.factor(Foundation)Stone    -856.193044  -3133.512481  -4901.222834\nas.factor(Foundation)Wood   -14799.401958 -17093.217377 -17405.648996\n                               tau= 0.63     tau= 0.64     tau= 0.65\n(Intercept)                  25965.25516  26427.251749  25112.067296\nGrLivArea                      101.39348    101.151222    100.380367\nLotArea                          1.43565      1.427094      1.427065\nTotRmsAbvGrd                 -4817.22780  -4636.211338  -4329.229967\nas.factor(LotShape)IR2      -10345.48771  -8582.299740  -9136.826873\nas.factor(LotShape)IR3      -18893.34500 -20069.018597 -20746.506754\nas.factor(LotShape)Reg      -11830.01883 -11989.615320 -11377.582816\nas.factor(Foundation)CBlock  21096.68322  20706.365175  21670.435266\nas.factor(Foundation)PConc   57280.59349  57589.679633  59199.576290\nas.factor(Foundation)Slab   -20066.57449 -21130.561410 -20698.574981\nas.factor(Foundation)Stone   -5924.31223  -7094.789289  -6200.057431\nas.factor(Foundation)Wood   -17241.22576 -18157.594541 -17326.999780\n                                tau= 0.66     tau= 0.67     tau= 0.68\n(Intercept)                  23679.901787  25230.307867  24702.851355\nGrLivArea                       99.666737    101.375634    101.196884\nLotArea                          1.434624      1.413474      1.529935\nTotRmsAbvGrd                 -3892.352731  -4312.308803  -4369.636651\nas.factor(LotShape)IR2       -1890.297661  -2447.464918  -3246.224376\nas.factor(LotShape)IR3      -21203.287156 -22605.359932 -24254.845814\nas.factor(LotShape)Reg      -10965.557957 -10540.896484  -9778.842840\nas.factor(Foundation)CBlock  21477.332187  20903.555213  20980.440248\nas.factor(Foundation)PConc   59847.875349  59588.773847  60433.203246\nas.factor(Foundation)Slab   -20385.402853 -18822.939866 -19522.713970\nas.factor(Foundation)Stone   -6467.365043  18051.694806  17230.826888\nas.factor(Foundation)Wood   -17213.950193  -8931.221156  -7997.876038\n                               tau= 0.69     tau= 0.70     tau= 0.71\n(Intercept)                  22964.18361  22388.394866  22807.031393\nGrLivArea                      102.83782    103.311696    104.415782\nLotArea                          1.68051      1.848284      1.878167\nTotRmsAbvGrd                 -4641.84869  -4824.756958  -5120.192111\nas.factor(LotShape)IR2         445.12399    643.088316     92.142932\nas.factor(LotShape)IR3      -26663.13505 -18689.727315 -19674.353374\nas.factor(LotShape)Reg       -9388.18355  -9142.867701  -8990.285827\nas.factor(Foundation)CBlock  21444.87371  21512.771435  21531.932468\nas.factor(Foundation)PConc   61050.95260  61323.283629  62969.217116\nas.factor(Foundation)Slab   -19534.51852 -20032.891991 -15210.811420\nas.factor(Foundation)Stone   17107.73241  16429.668599  16065.189079\nas.factor(Foundation)Wood   -13580.09824 -14804.369575 -15418.043622\n                                tau= 0.72     tau= 0.73     tau= 0.74\n(Intercept)                  22598.137983  21986.404584  20735.634429\nGrLivArea                      104.813873    105.158079    102.279907\nLotArea                          1.832502      1.961147      1.941623\nTotRmsAbvGrd                 -5047.523933  -4642.736337  -3404.654549\nas.factor(LotShape)IR2        -442.340639  -3361.428179    644.899465\nas.factor(LotShape)IR3      -20333.181901 -24039.930707 -28573.779372\nas.factor(LotShape)Reg       -8822.692657  -8579.685076  -9425.479228\nas.factor(Foundation)CBlock  21711.980257  18821.304818  17779.841476\nas.factor(Foundation)PConc   63440.418823  60428.278331  61341.016725\nas.factor(Foundation)Slab   -15690.745145 -19034.962391 -21233.017060\nas.factor(Foundation)Stone   15786.940602  12674.590661  11373.490087\nas.factor(Foundation)Wood   -15746.731238 -17756.508655 -22962.912950\n                                tau= 0.75     tau= 0.76     tau= 0.77\n(Intercept)                  20216.613824  19456.828955  22665.935694\nGrLivArea                      102.168087    102.840976    106.784609\nLotArea                          1.985564      2.040054      1.973437\nTotRmsAbvGrd                 -3296.988020  -3500.609240  -4474.494373\nas.factor(LotShape)IR2         532.140981     57.722824   -825.627805\nas.factor(LotShape)IR3      -30920.983459 -32205.035758 -31984.880809\nas.factor(LotShape)Reg       -9234.620779  -8534.781755  -8168.305112\nas.factor(Foundation)CBlock  17513.104958  18241.497133  17078.579340\nas.factor(Foundation)PConc   62442.290454  63691.545683  62606.482832\nas.factor(Foundation)Slab   -21750.938115 -21403.226745 -22667.700696\nas.factor(Foundation)Stone   10874.350602  10855.552204   9153.048138\nas.factor(Foundation)Wood   -23402.174602 -22839.293117 -26544.147662\n                                tau= 0.78     tau= 0.79    tau= 0.80\n(Intercept)                  22595.867837  22951.754038  27240.46069\nGrLivArea                      107.608263    107.738436    113.03176\nLotArea                          1.999848      1.987693      1.91309\nTotRmsAbvGrd                 -4567.200716  -4575.220211  -5739.82428\nas.factor(LotShape)IR2       -2306.057866  -4250.157056  -6059.02534\nas.factor(LotShape)IR3      -35577.697730 -38352.644691 -27646.71476\nas.factor(LotShape)Reg       -8298.030970  -8377.429899  -9456.99106\nas.factor(Foundation)CBlock  16868.034988  16850.125176  15469.72878\nas.factor(Foundation)PConc   64824.882265  67335.725271  65513.05953\nas.factor(Foundation)Slab   -22993.923652 -23253.822387 -16251.45048\nas.factor(Foundation)Stone    8832.002908   8585.237044   7045.55389\nas.factor(Foundation)Wood   -26617.674930 -25156.790442 -30793.89910\n                                tau= 0.81     tau= 0.82     tau= 0.83\n(Intercept)                  20004.883560  21169.247111  18882.868062\nGrLivArea                      112.981971    115.125404    118.050011\nLotArea                          2.051323      2.122179      2.467049\nTotRmsAbvGrd                 -4713.619639  -5311.874328  -5806.206038\nas.factor(LotShape)IR2       -6891.911643  -4502.531253  -5751.139302\nas.factor(LotShape)IR3      -25201.153674 -25980.798110 -25755.851156\nas.factor(LotShape)Reg       -8930.361258  -7999.189112  -6950.638338\nas.factor(Foundation)CBlock  16974.693701  16065.997881  14438.797749\nas.factor(Foundation)PConc   65863.036267  65913.811093  66316.212115\nas.factor(Foundation)Slab   -14590.820409 -17032.668445 -19342.167712\nas.factor(Foundation)Stone    7439.616762   5754.781810   3736.293357\nas.factor(Foundation)Wood   -32353.969958 -37301.724440 -41016.742220\n                                tau= 0.84     tau= 0.85     tau= 0.86\n(Intercept)                  16199.225457  16285.111489  16994.803145\nGrLivArea                      115.873363    117.517284    117.642262\nLotArea                          2.479451      2.551317      2.497501\nTotRmsAbvGrd                 -4840.328532  -5146.242123  -4978.128056\nas.factor(LotShape)IR2       -7734.146296 -11132.897287 -15162.840209\nas.factor(LotShape)IR3      -25337.649377 -25831.837081 -27027.907033\nas.factor(LotShape)Reg       -7949.641206  -8260.158928  -8679.594657\nas.factor(Foundation)CBlock  15487.539980  16592.711592  15903.758798\nas.factor(Foundation)PConc   70051.315302  72757.865254  76530.276580\nas.factor(Foundation)Slab   -16678.361757 -17996.640639 -18832.659673\nas.factor(Foundation)Stone    8250.504968   6731.776538   5122.641942\nas.factor(Foundation)Wood   -38743.555761 -37918.936686 -35656.677346\n                                tau= 0.87     tau= 0.88     tau= 0.89\n(Intercept)                  14911.344947  13275.523121  14778.429463\nGrLivArea                      117.522476    115.956886    120.798576\nLotArea                          2.404204      2.957021      3.031247\nTotRmsAbvGrd                 -4518.907605  -4762.075963  -5512.955175\nas.factor(LotShape)IR2       -8049.606475 -11303.163117 -12097.638798\nas.factor(LotShape)IR3      -26201.681828 -25289.414130 -28754.597364\nas.factor(LotShape)Reg       -7822.802262  -7116.982039  -6567.159176\nas.factor(Foundation)CBlock  16855.675674  16976.615539  13893.516098\nas.factor(Foundation)PConc   78651.031061  83345.739132  82573.699909\nas.factor(Foundation)Slab   -18646.556530 -10849.094056 -13388.319913\nas.factor(Foundation)Stone    3340.218739   5123.645042  -1527.047908\nas.factor(Foundation)Wood   -43016.941704 -38421.288692 -46123.799411\n                                tau= 0.90     tau= 0.91    tau= 0.92\n(Intercept)                  12828.545747  13006.536233  15528.56345\nGrLivArea                      122.356446    127.600423    132.64164\nLotArea                          3.204804      3.020947      2.91086\nTotRmsAbvGrd                 -5722.681363  -6337.873919  -6453.76912\nas.factor(LotShape)IR2       -7348.434911 -13609.510041 -16444.33579\nas.factor(LotShape)IR3      -33498.317394 -27947.359440 -33281.31980\nas.factor(LotShape)Reg       -5890.427052  -5931.370207  -5073.67453\nas.factor(Foundation)CBlock  14295.606183  16776.818716  11082.55280\nas.factor(Foundation)PConc   85822.781040  85645.867630  81289.28842\nas.factor(Foundation)Slab   -13083.826865 -12822.695372 -17103.95748\nas.factor(Foundation)Stone   -2166.191177  -2364.443738  -8773.30216\nas.factor(Foundation)Wood   -53100.420936 -53225.478537 -62004.41910\n                                tau= 0.93     tau= 0.94     tau= 0.95\n(Intercept)                  17298.649467  26023.753531  22343.217900\nGrLivArea                      133.594106    133.219279    140.572938\nLotArea                          2.925883      2.759143      2.959795\nTotRmsAbvGrd                 -6698.251008  -6135.836411  -6858.469841\nas.factor(LotShape)IR2      -18188.932162 -21371.198924 -23548.489431\nas.factor(LotShape)IR3      -34879.762582 -44695.771363 -44792.713322\nas.factor(LotShape)Reg       -6511.243109  -9334.812099  -8580.841745\nas.factor(Foundation)CBlock  11902.610971   5560.656379   5714.715798\nas.factor(Foundation)PConc   85508.460653  80198.632817  82479.056895\nas.factor(Foundation)Slab   -17340.750869 -23408.221044 -22495.775261\nas.factor(Foundation)Stone   -8883.739769 -15773.599690 -17709.902187\nas.factor(Foundation)Wood   -64061.405873 -71298.754022 -78288.723826\n                                tau= 0.96   tau= 0.97     tau= 0.98\n(Intercept)                   3255.647432    148.4785 -10998.408946\nGrLivArea                      145.991716    136.3179    138.433448\nLotArea                          3.176572      3.1476      2.619056\nTotRmsAbvGrd                 -4586.133462  -2069.5541    547.871254\nas.factor(LotShape)IR2      -22280.881703 -20855.6338 -14010.362509\nas.factor(LotShape)IR3      -40068.610681 -39485.3622 -37659.133197\nas.factor(LotShape)Reg       -6603.411438  -6468.7101    371.117167\nas.factor(Foundation)CBlock   7031.533801   7845.3941   6602.058963\nas.factor(Foundation)PConc   84519.178456 106213.2927 106639.556311\nas.factor(Foundation)Slab    -9828.038154 -11229.6005 -10500.504173\nas.factor(Foundation)Stone  -18820.110889 -19369.7231 -25375.151319\nas.factor(Foundation)Wood   -81003.014956 -76894.0273 -74255.284018\n                                tau= 0.99     tau= 1.00\n(Intercept)                 -25348.530960 -58902.256969\nGrLivArea                      138.979293    112.239435\nLotArea                          2.389661      4.651464\nTotRmsAbvGrd                  4589.322899  17522.997595\nas.factor(LotShape)IR2      -18018.391351 -71396.183446\nas.factor(LotShape)IR3      -38691.649759 -48277.123394\nas.factor(LotShape)Reg        1088.871524 -21032.170494\nas.factor(Foundation)CBlock  11271.384815  41523.895582\nas.factor(Foundation)PConc  126726.430775 152379.990565\nas.factor(Foundation)Slab    -3986.377853  23443.139224\nas.factor(Foundation)Stone  -30406.982105 -35179.267496\nas.factor(Foundation)Wood   -77617.953208 -94012.337402\n\np_grLivArea &lt;- plot(qrs$coefficients[2, ])\n\n\n\np_LotArea &lt;- plot(qrs$coefficients[3, ])\n\n\n\np_TotsRmsAbvGrd &lt;- plot(qrs$coefficients[4, ])\n\n\n\np_IR2 &lt;- plot(qrs$coefficients[5, ])\n\n\n\np_IR3 &lt;- plot(qrs$coefficients[6, ])\n\n\n\np_Reg &lt;- plot(qrs$coefficients[7, ])\n\n\n\np_CBlock &lt;- plot(qrs$coefficients[8, ])\n\n\n\np_Conic &lt;- plot(qrs$coefficients[9, ])\n\n\n\ngrid.arrange(plot(qrs$coefficients[2, ]),\nplot(qrs$coefficients[3, ]),\nplot(qrs$coefficients[4, ]),\nplot(qrs$coefficients[5, ]),\nplot(qrs$coefficients[6, ]),\nplot(qrs$coefficients[7, ]),\nplot(qrs$coefficients[8, ]),\nplot(qrs$coefficients[9, ]),\nncol=3, nrow=4)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n4.2.2 OLS model\n\nols = lm(data=df, SalePrice ~ GrLivArea + LotArea + TotRmsAbvGrd + as.factor(LotShape) + as.factor(Foundation))\nols_summary = summary(ols)\nols_summary\n\n\nCall:\nlm(formula = SalePrice ~ GrLivArea + LotArea + TotRmsAbvGrd + \n    as.factor(LotShape) + as.factor(Foundation), data = df)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-422488  -26194    -805   20461  326538 \n\nCoefficients:\n                              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)                  2.005e+04  7.267e+03   2.759  0.00587 ** \nGrLivArea                    9.893e+01  4.538e+00  21.801  &lt; 2e-16 ***\nLotArea                      9.173e-01  1.425e-01   6.438 1.64e-10 ***\nTotRmsAbvGrd                -4.313e+03  1.396e+03  -3.089  0.00205 ** \nas.factor(LotShape)IR2      -2.009e+03  8.113e+03  -0.248  0.80446    \nas.factor(LotShape)IR3      -6.936e+04  1.603e+04  -4.328 1.61e-05 ***\nas.factor(LotShape)Reg      -1.342e+04  2.809e+03  -4.777 1.96e-06 ***\nas.factor(Foundation)CBlock  2.094e+04  4.497e+03   4.656 3.52e-06 ***\nas.factor(Foundation)PConc   6.679e+04  4.541e+03  14.708  &lt; 2e-16 ***\nas.factor(Foundation)Slab   -1.426e+04  1.067e+04  -1.336  0.18170    \nas.factor(Foundation)Stone  -3.396e+03  2.021e+04  -0.168  0.86658    \nas.factor(Foundation)Wood   -5.553e+02  2.842e+04  -0.020  0.98441    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 48410 on 1448 degrees of freedom\nMultiple R-squared:  0.6315,    Adjusted R-squared:  0.6287 \nF-statistic: 225.6 on 11 and 1448 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "analysis.html#model-evaluation",
    "href": "analysis.html#model-evaluation",
    "title": "4  Analysis",
    "section": "4.3 Model evaluation",
    "text": "4.3 Model evaluation\n\n4.3.1 Mean absolute error\n\nolsMae = mae(predict(ols), df$SalePrice)\nolsMae\n\n[1] 32186.89\n\nQr50Mae = mae(predict(qr50), df$SalePrice)\nQr50Mae\n\n[1] 31160.69\n\n\nOLS MAE value: 32186.89.\nAnd QR 50th MAE value: 31160.69.\nQR for 50th quantile has a lower MAE therefore it is has more accurate predictions.\n\n\n4.3.2 Root mean squared error\n\nolsRmse = rmse(predict(ols), df$SalePrice)\nolsRmse\n\n[1] 48209.34\n\nQr50Rmse = rmse(predict(qr50), df$SalePrice)\nQr50Rmse\n\n[1] 49434.81\n\n\nOLS RMSE value: 48209.34.\nAnd QR 50th RMSE value: 49434.81.\nSince OLS algorithm’s goal is to minimize RMSE, as expected it has a better (lower) value. But QR has a very similar value which shows how well QR model can keep up even if it is not focusing on optimizing RMSE.\n\n\n4.3.3 Variance of error\n\nols_summary$df[2]\n\n[1] 1448\n\nqr50_summary$rdf\n\n[1] 1448\n\n\nThe variance of error for OLS: 1448.\nThe variance of error for QR 50th: 1448.\nBoth have the same variance of error.\n\n\n4.3.4 Min/max error\n\n# Min OLS error\nformat(round(min(ols_summary$residuals), digits=0), scientific=F)\n\n[1] \"-422488\"\n\n# Absolute min OLS error\nformat(round(min(abs(ols_summary$residuals)), digits=0), scientific=F)\n\n[1] \"5\"\n\n# Max OLS error\nformat(round(max(ols_summary$residuals), digits=0), scientific=F)\n\n[1] \"326538\"\n\n# Absolute max OLS error\nformat(round(max(abs(ols_summary$residuals)), digits=0), scientific=F)\n\n[1] \"422488\"\n\n# Min QR 50th error\nformat(round(min(qr50_summary$residuals), digits=0), scientific=F)\n\n[1] \"-440106\"\n\n# Absolute min QR 50th error\nformat(round(min(abs(qr50_summary$residuals)), digits=0), scientific=F)\n\n[1] \"0\"\n\n# Max QR 50th error\nformat(round(max(qr50_summary$residuals), digits=0), scientific=F)\n\n[1] \"351819\"\n\n# Absolute max QR 50th error\nformat(round(max(abs(qr50_summary$residuals)), digits=0), scientific=F)\n\n[1] \"440106\"\n\n\n\n4.3.4.1 OLS\nMin OLS error: -422488.\nAbsolute min OLS error: 5.\nMax OLS error: 326538.\nAbsolute max OLS error: 422488.\n\n\n4.3.4.2 QR\nMin QR 50th error: -440106.\nAbsolute min QR 50th error: 0.\nMax QR 50th error: 351819.\nAbsolute max QR 50th error: 440106."
  },
  {
    "objectID": "methods.html#design-matrix",
    "href": "methods.html#design-matrix",
    "title": "3  Methods",
    "section": "3.1 Design Matrix",
    "text": "3.1 Design Matrix\nThe design matrix is defined to be a matrix \\(\\textbf X\\) such that \\(\\textbf X_{ij}\\) (the \\(j^{th}\\)) column of the i^{th} row of \\(\\textbf X\\)) represents the value of the \\(j^th\\) variable associated with the i^{th} variable object.\nA regression model may be represent via matrix multiplication as\n\\[\ny=\\textbf X\\beta + e\n\\]\nwhere X is the design matrix, \\(\\beta\\) is a vector of the model’s coefficient (one for each variable), e is a vector of random errors with a mean zero, and y is the vector outputs for each object."
  },
  {
    "objectID": "methods.html#ordinary-least-squares",
    "href": "methods.html#ordinary-least-squares",
    "title": "3  Methods",
    "section": "3.2 Ordinary least squares",
    "text": "3.2 Ordinary least squares\nOrdinary least squares model or OLS, works by creating a line through the data points. Then it calculates the difference between each prediction and observation (residual). And it tries to minimize the squared value of the residuals. The ordinary least squares is defined by:\n\\[\ny_i=\\alpha+\\beta x_i+\\varepsilon_i .\n\\]\nThe least squares estimates in this case are given by simple formulas\n\\[\n\\widehat{\\beta} =\\frac{\\sum_{i=1}^n\\left(x_i-\\bar{x}\\right)\\left(y_i-\\bar{y}\\right)}{\\sum_{i=1}^n\\left(x_i-\\bar{x}\\right)^2}\n\\]\n\\[\n\\widehat{\\alpha} =\\bar{y}-\\widehat{\\beta} \\bar{x}\n\\]"
  },
  {
    "objectID": "methods.html#how-does-the-minimization-of-absolute-deviations-equal-the-media",
    "href": "methods.html#how-does-the-minimization-of-absolute-deviations-equal-the-media",
    "title": "3  Methods",
    "section": "3.3 How does the minimization of absolute deviations equal the media?",
    "text": "3.3 How does the minimization of absolute deviations equal the media?\n\n3.3.1 Definition of mean\nAssume, without loss of generality, that Y is a continuous random variable. The expected value of the absolute sum of deviations from a given center c can be split into the following two terms:\n\\[\nE|Y - c| = \\int_{y\\in R}|y-c|f(y)dy \\\\\n=\\int_{y &lt; c} |y-c|f(y)dy + \\int_{y&gt;c}|y-c|f(y)dy  \\\\\n\\]\nIf y is less than c, then y-c will always be negative. Therefore, |y-c|=-(c-y). By a similar argument, |y-c| is just (y-c) when y &gt; c.\n\\[\n=\\int_{y&lt;c}(c-y)f(y)dy + \\int_{y&gt;c}(y-c)f(y)dy\n\\]\nSince the absolute value is convex, differentiating E|y-c| with respect to c and setting the partial derivatives to zero will lead to the solution of the minimum.\n\\[\n\\frac{\\partial}{\\partial c}E|y-c|=0\n\\]\n\\[\n\\begin{aligned}\n& \\left\\{\\left.(c-y) f(y)\\right|_{-\\infty} ^c+\\int_{y&lt;c} \\frac{\\partial}{\\partial c}(c-y) f(y) d y\\right\\}+ \\\\\n& \\left\\{\\left.(y-c) f(y)\\right|_c ^{+\\infty}+\\int_{y&gt;c} \\frac{\\partial}{\\partial c}(y-c) f(y) d y\\right\\}=0\n\\end{aligned}\n\\]\nThe limit of any PDF approaching positive or negative infinity will equal 0, therefore the previous equation simplifies to:\n\\[\n\\begin{aligned}\n& \\left\\{\\int_{y&lt;c} \\frac{\\partial}{\\partial c}(c-y) f(y) d y\\right\\}+ \\\\\n& \\left\\{\\int_{y&gt;c} \\frac{\\partial}{\\partial c}(y-c) f(y) d y\\right\\}=0\n\\end{aligned}\n\\]\nTaking the partial, \\(\\frac{\\partial}{\\partial c}(c-y)f(y)\\) = f(y) and \\(\\frac{\\partial}{\\partial c}(y-c)f(y)\\) = -f(y).\n\\[\n\\begin{aligned}\n& \\left\\{\\int_{y&lt;c} \\theta f(y) d y\\right\\}+ \\\\\n& \\left\\{\\int_{y&gt;c} -\\theta f(y) d y\\right\\}=0\n\\end{aligned}\n\\]\nUsing the CDF definition and the notion of reciprocals, the previous equation simplifies to: \\(F(c)-[1-F(c)] = 0\\) and thus \\(2F(c)-1=0\\) \\(\\longrightarrow\\) \\(F(c)=\\frac{1}{2}\\) \\(\\longrightarrow\\) c=Me.\nThus the minimization to a weighted least absolute deviation loss function is the value that gives the theta^{th} quantile."
  },
  {
    "objectID": "methods.html#generalization-least-absolute-deviations",
    "href": "methods.html#generalization-least-absolute-deviations",
    "title": "3  Methods",
    "section": "3.4 Generalization least absolute deviations",
    "text": "3.4 Generalization least absolute deviations\nThe solution of the minimization problem formulated in Equation (1.2) is thus the median. The above solution does not change by multiplying the two components of \\(E|Y-c|\\) by a constant \\(\\theta\\) and \\((1-\\theta)\\), respectively. This allows us to formulate the same problem for the generic quantile \\(\\theta\\). Namely, using the same strategy for Equation (1.5), we obtain:\n\\[\n\\frac{\\partial}{\\partial c} E\\left[\\rho_\\theta(Y-c)\\right]=\\frac{\\partial}{\\partial c}\\left\\{(1-\\theta) \\int_{-\\infty}^c|y-c| f(y) d y+\\theta \\int_c^{+\\infty}|y-c| f(y) d y\\right\\} .\n\\]\nRepeating the above argument, we easily obtain:\n\\[\n\\frac{\\partial}{\\partial c} E\\left[\\rho_\\theta(Y-c)\\right]=(1-\\theta) F(c)-\\theta(1-F(c))=0\n\\]\nand then \\(q_\\theta\\) as the solution of the minimization problem:\n\\[\nF(c)-\\theta F(c)-\\theta+\\theta F(c)=0 \\Longrightarrow F(c)=\\theta \\Longrightarrow c=q_\\theta .\n\\]\n, interpreting \\(Y\\) as a response variable and \\(\\mathbf{X}\\) as a set of predictor variables, the idea of the unconditional median can be extended to the estimation of the conditional median function:\n\\[\n\\hat{\\mu}\\left(\\mathbf{x}_i, \\boldsymbol{\\beta}\\right)=\\underset{\\mu}{\\operatorname{argmin}} E\\left[|Y-\\mu\\left(\\mathbf{x}_i, \\boldsymbol{\\beta}\\right)\\right|],\n\\]\nIn the case of a linear mean function, \\(\\mu(x_i, \\beta)=x_i^T\\beta\\) so the previous equation becomes:\n\\[\n\\hat{\\boldsymbol{\\beta}}=\\underset{\\boldsymbol{\\beta}} argmin \\space E[|Y - x_i^T\\beta|]\n\\]\nBy the same argument,\n\\[\nq_\\theta=\\underset{c}{\\operatorname{argmin}} E\\left[\\rho_\\theta(Y-c)\\right]\n\\]\nwhere \\(\\rho_\\theta(\\).\\()\\) denotes the following loss function:\n\\[\n\\begin{aligned}\n\\rho_\\theta(y) & =[\\theta-I(y&lt;0)] y \\\\\n& =[(1-\\theta) I(y \\leq 0)+\\theta I(y&gt;0)]|y| .\n\\end{aligned}\n\\]\n\n3.4.1 Graphic\n\ndata(cars)\n\n\nrq50 &lt;- rq(dist ~ speed, data=cars, tau=0.5)\nyhat&lt;-rq50$fitted.values\ncolor = sign(rq50$residuals)\nqplot(x=cars$speed, y=cars$dist)+geom_line(y=yhat)+\n       geom_segment(aes(x=cars$speed, xend=cars$speed, y=cars$dist, yend=yhat, group=as.factor(color), color=as.factor(color)))+\n       labs(title=\"regression errors using OLS\", color=color)\n\n\n\n\n\ntable(color)\n\ncolor\n-1  0  1 \n24  3 23 \n\n\nNotice that approximately half of the distribution of the points are above the QR line and approximately half are above the QR line. Now let’s see what happens when we look at the 90th conditional quantile.\n\nrq90 &lt;- rq(dist ~ speed, data=cars, tau=0.9)\nyhat&lt;-rq90$fitted.values\ncolor = sign(rq90$residuals)\nqplot(x=cars$speed, y=cars$dist)+geom_line(y=yhat)+\n       geom_segment(aes(x=cars$speed, xend=cars$speed, y=cars$dist, yend=yhat, group=as.factor(color), color=as.factor(color)))+\n       labs(title=\"regression errors\", color=color)\n\n\n\n\n\ntable(color)\n\ncolor\n-1  0  1 \n44  2  4 \n\n\nWhen we input the .9 for the quantile, we get approximately 90% of the points under the QR line and 10% over the QR line.\n\nrq10 &lt;- rq(dist ~ speed, data=cars, tau=0.1)\nyhat&lt;-rq10$fitted.values\ncolor = sign(rq10$residuals)\nqplot(x=cars$speed, y=cars$dist)+geom_line(y=yhat)+\n       geom_segment(aes(x=cars$speed, xend=cars$speed, y=cars$dist, yend=yhat, group=as.factor(color), color=as.factor(color)))+\n       labs(title=\"regression errors\", color=color)\n\n\n\n\n\ntable(color)\n\ncolor\n-1  0  1 \n 5  1 44 \n\n\nWhen we input 0.1 for the 10th percentile, we get approximately 90% of the points above the QR line and 10% below the QR line.\nThus, we can see that QR is not online a robust ## Evaluation metrics\n\n\n3.4.2 Mean absolute error\nThe mean absolute error (MAE) is the average magnitude of the errors of the values predicted by the regression and the actual observed values for the response variable. Because it is a simple average, all errors have the same weight, there are no penalties for different magnitude deviations [2]. MAE assumes that the errors are normally distributed, if the error distribution was non-normal, the average may not be a good measure of centrality and can paint a false picture of the goodness-of-fit of the regression curve. MAE also assumes that the errors are unbiased. While the average magnitude of the errors is expected to be non-zero (unless the regression is a perfect fit) the average of the residuals, i.e., the deviation of the predicted value from the actual value, considering underestimation and overestimation. This means on average the regression curve does not over or underestimate.\n\\[\n\\text { MAE }=\\frac{1}{n}\\sum_{i=1}^n\\left|y_i-\\hat{y}_i\\right|=\\frac{1}{n}\\sum_{i=1}^n\\left|e_i\\right|\n\\]\n\n\n3.4.3 Root mean squared error\nIt calculates the differences between the predictions and the actual observations (residuals) and then gets their quadratic mean for each. This type of error gives a larger penalty for larger errors [2]. This error also assumes that the errors are unbiased and that they follow a normal distribution. This gives a picture of the size of residuals in comparison to the regression line.\n\\[\n\\operatorname{RMSE}=\\sqrt{\\operatorname{MSE}}=\\sqrt{\\frac{1}{n}\\sum_{i=1}^n (y_i-\\hat{y}_i)^2}=\\sqrt{\\frac{1}{n}\\sum_{i=1}^n e_i^2}\n\\]\n\n\n3.4.4 Variance of error\nIt is a measure of how spread all the errors are from the mean of all errors.\n\\[\n\\operatorname{Var}(e)=\\frac{1}{n}\\sum_{i=1}^n(e_i-\\bar{e})^2\n\\]\n\n\n3.4.5 Min/max error\nA measure of the maximum residual for a prediction and the minimum residual.\n\\[\nf: X \\rightarrow \\mathbb{R} \\text {, if }(\\forall e \\in X_{error}) f\\left(e_i\\right) \\geq f(e)\n\\]\n\\[\nf: X \\rightarrow \\mathbb{R} \\text {, if }(\\forall e \\in X_{error}) f\\left(e_i\\right) \\leq f(e)\n\\]"
  }
]